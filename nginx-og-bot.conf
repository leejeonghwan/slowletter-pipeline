# /etc/nginx/snippets/og-bot.conf
# 소셜 미디어 봇에게 OG 메타 HTML을 서빙하는 설정
# 메인 server 블록의 location /context/ 안에 include 하거나
# 아래 내용을 직접 location 블록에 추가

# 사용법: 기존 nginx 설정의 location /context/ 블록을 아래로 교체
#
# location /context/ {
#     set $og_bot 0;
#     if ($http_user_agent ~* "(facebookexternalhit|Facebot|Twitterbot|TelegramBot|LinkedInBot|Slackbot|Discordbot|WhatsApp|kakaotalk-scrap|Googlebot|bingbot|Yeti)") {
#         set $og_bot 1;
#     }
#     if ($og_bot = 1) {
#         rewrite ^ /context-og.html break;
#     }
#     proxy_pass http://127.0.0.1:8510/context/;
#     proxy_set_header Host $host;
#     proxy_set_header X-Real-IP $remote_addr;
#     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header X-Forwarded-Proto $scheme;
#     proxy_http_version 1.1;
#     proxy_set_header Upgrade $http_upgrade;
#     proxy_set_header Connection "upgrade";
# }
